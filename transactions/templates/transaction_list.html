{% extends "transaction_base.html" %}

{% block trans-active %} class="active" {% endblock %}

{% block secondary-nav %}

<ul id="account-menu" class="nav secondary-nav">
	<li class="dropdown">
		<a href="#" class="dropdown-toggle">Account: {{ request.GET.account }}</a>
		<ul class="dropdown-menu">
			{% for account in accounts %}
			<li>&nbsp;&nbsp; <input type="checkbox" name="account" value="{{ account.id }}" /> {{ account.name }}</li>
			{% endfor %}
			<li class="divider"></li>
			<li>&nbsp;&nbsp; <input type="submit" value="Filter" /></li>
		</ul>
	</li>
	<li class="dropdown">
		<a href="#" class="dropdown-toggle">Category: </a>
		<ul class="dropdown-menu">
			{% for category in categories %}
			<li>&nbsp;&nbsp; <input type="checkbox" name="category" value="{{ category.id }}" /> {{ category.name }}</li>
			{% endfor %}
			<li class="divider"></li>
			<li>&nbsp;&nbsp; <input type="submit" value="Filter" /></li>
		</ul>
	</li>
</ul>
{% endblock %}

{% block content %}
{% if object_list %}
<form id="trans-list-form" method="post" action="/transaction/actions">
{% csrf_token %}
<input type="hidden" name="action" value="category" />
<div id="checkbox-actions" class="row" style="display:none;">
  <div class="span13 columns">
    <select name="category">
      <option value="0">Select a category...</option>
    {% for category in categories %}
      <option value="{{ category.id }}">{{ category.name }}</option>
    {% endfor %}
    </select>
    <input id="category-button" class="btn" type="submit" value="Change" />
  </div>
  <div class="span3 columns">
    <input id="delete-button" class="btn danger" type="button" value="Delete Transactions" />
  </div>
</div>
<table class="zebra-striped">
  <thead>
    <th><input id="check-all" type="checkbox" value="0" /></th>
    <th>Account</th>
    <th>Date</th>
    <th>Description</th>
    <th>Amount</th>
    <th>Category</th>
  </thead>
  <tbody>
  {% for object in object_list %}
    <tr>
    <td><input class="id-checkbox" type="checkbox" name="ids" value="{{ object.id }}" /></td>
    <td>{{ object.account }}</td>
    <td>{{ object.date }}</td>
    <td><a href="/transaction/{{ object.id }}">{{ object.description }}</a></td>
    <td>${{ object.amount }}</td>
    <td>{{ object.category }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>

{% if is_paginated %}
<div class="pagination">
    <ul>
        {% if paginator.has_previous %}
            <li class="prev"><a href="#">&larr; Previous</a></li>
        {% else %}    
            <li class="prev disabled"><a href="#">&larr; Previous</a></li>
        {% endif %}
		
		
		
        <span class="current">
            Page {{ object_list.number }} of {{ object_list.paginator.num_pages }}.
        </span>

        {% if object_list.has_next %}
            <a href="?page={{ object_list.next_page_number }}">next</a>
        {% endif %}
    </ul>
</div>
{% endif %}



</form>

{% else %}

<p>You haven't created any transactions yet!</p>

{% endif %}

<p><a class="btn" href="/transaction/new">New</a></p>

{% endblock %}